<!-- webcomponents -->



<!-- elements -->
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="bite-main.html" async>
<link rel="import" href="bite-join.html" async>


<dom-module id="bite-pwa">
  <template>
    <style is="custom-style">
      :host {
        display: block;
        position: relative;
        --app-primary-color: #EC9630;
        --app-text-color: #EC9630;
        --app-secondary-color: #FAFAFA;
        --app-header-color: #F5F5F5;
        --app-accent-color: #EC9630;
      }

      app-header {
        @apply(--layout-fixed-top);
        z-index: 1;
        background-color: var(--app-header-color);
        box-shadow:0px 3px 5px rgba(100, 100, 100, 0.49);
        font-style: italic;
        font-weight: 600;
      }

      iron-icon {
        color: var(--app-primary-color);
      }

      app-toolbar{
        color: var(--app-text-color);
      }

      .walletText {
        margin-right: 5px;
      }

      .content{
        max-width: 800px;
        margin: 0 auto;
        color: #E98B2B;
      }


    </style>
    <!-- app-location binds to the app's URL -->
    <app-location route="{{route}}"></app-location>

    <!-- this app-route manages the top-level routes -->
    <app-route
            route="{{route}}"
            pattern="/:page"
            data="{{routeData}}"
            tail="{{subroute}}"
            ></app-route>



    <app-header-layout>
      <app-header fixed effects="waterfall">
        <!-- Toolbar goes here -->
        <app-toolbar id="toolbar">
          <div main-title id="mainTitle">HEY, NAAM</div>
          <paper-icon-button id="personButton" icon="social:person" on-tap="_changePage"></paper-icon-button>
        </app-toolbar>
      </app-header>

    <div class="content">

      <iron-pages id="pages" selected="[[page]]" attr-for-selected="name" role="main" selected-attribute="visible">
        <bite-main name="main"></bite-main>
        <bite-open name="open"></bite-open>
        <bite-join name="join"></bite-join>
      </iron-pages>
    </div>


    <!--
    <button type="button" id="button" on-tap="_changePage">Click</button>
    -->
    </app-header-layout>
  </template>

  <script>
    Polymer({

      is: 'bite-pwa',

      properties: {
          selected: {
              type: Number,
              value: 0
          },

          page: {
              type: String,
              reflectToAttribute: true,
              observer: '_pageChanged'
          }
      },

      observers: [
              '_routePageChanged(routeData.page)'
      ],
        

      _routePageChanged: function(page){
        this.page = page || 'join';
        console.log(page);

      },

      _pageChanged: function(page){
        //load page import on demand

      },

      _showPage404: function(){
        this.page = '404';
      },

      created: function(){
        window.performance && performance.mark && performance.mark('bite-pwa.created');
        //Upgrade element, remove unresolved
        console.log("unresolved removed");
        this.removeAttribute('unresolved');
      },

      ready: function(){
        Polymer.RenderStatus.afterNextRender(this, function(){
            this.listen(window, 'online', '_notifyNetworkStatus');
            this.listen(window, 'offline', '_notifyNetworkStatus');
        });
      },

      _changePage: function(){
          console.log("hi");
          if(this.page == 'main'){
              this.page = 'join';
          } else{
              this.page = 'main';

          }
      }

    });

  </script>
</dom-module>
